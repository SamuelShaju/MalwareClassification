import keras
import pandas as pd
import numpy as np
import re


def predict():
    model = keras.models.load_model('Malware_CNN.h5')

    img = []
    with open('./uploads/malware1', 'rb') as file:
        byte = file.read(1)
        while byte:
            byte = file.read(1)
            img.append(int.from_bytes(byte, 'big'))
            # print((int.from_bytes(byte, 'big')))
    
    img = np.array(img[:1024])
    img = img.reshape(-1, 32, 32)

    pred = model.predict(img)
    print(pred)
    return pred
